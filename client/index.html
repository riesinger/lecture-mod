<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link href="https://fonts.googleapis.com/css?family=Poppins|Roboto" rel="stylesheet">
	<title>iCal generator</title>
	<meta name="author" content="Pascal Riesinger">
	<link href="https://tools.pascal-riesinger.de/rapla/css/app.css" rel="stylesheet">
</head>
<body>
	<header>
		<img src="https://tools.pascal-riesinger.de/rapla/img/logo.png" alt="iCal generator logo">
		<div>
			<h1>iCAL generator</h1>
			<h3 class="subtitle">Generate calendars for the lessons <strong>you</strong> need</h3>
		</div>
	</header>
	<main>
		<section>
			<h2>How to</h2>
			<p>Just tick the lessons you visit, then embed the calendar into your calendar viewer of choice (like Google
				Calendar
				or Outlook). Common lessons such as maths are included by default.
			</p>
			<p>
			For instructions on including the URL into your favorite calendar, please see:
			</p>
		<ul>
			<li><a href="https://support.google.com/calendar/answer/37100?co=GENIE.Platform%3DDesktop&hl=en">Google
				Calendar</a> (See the "Add using a link" section)
				Note that Google Calendar might not update the calendar correctly.
			</li>
			<li><a href="https://www.calendarwiz.com/knowledgebase/entry/71/">Outlook</a></li>
		</ul>
		</section>
		<section class="white">
			<form>
				<div class="field">
					<div class="control">
						<input type="checkbox" id="cb1" name="webengineering"/>
						<label class="checkbox" for="cb1">Webengineering II</label>
					</div>
				</div>
				<div class="field">
					<div class="control">
						<input type="checkbox" id="cb2" name="medizin">
						<label class="checkbox" for="cb2">Medizin</label>
					</div>
				</div>
				<div class="field">
					<div class="control">
						<input type="checkbox" id="cb3" name="compilerbau">
						<label class="checkbox" for="cb3">Compilerbau</label>
					</div>
				</div>
				<div class="field">
					<div class="control">
						<input type="checkbox" id="cb4" name="bec-test">
						<label class="checkbox" for="cb4">BEC-Test</label>
					</div>
				</div>
				<div class="field">
					<div class="control">
						<input type="checkbox" id="cb5" name="practice">
						<label class="checkbox" for="cb5">OO Best Practice</label>
					</div>
				</div>
				<div class="field">
					<div class="control">
						<input type="checkbox" id="cb6" name="workflow">
						<label class="checkbox" for="cb6">Workflow</label>
					</div>
				</div>
				<div class="field">
					<div class="control">
						<input type="checkbox" id="cb7" name="ada">
						<label class="checkbox" for="cb7">AdA</label>
					</div>
				</div>
				<div class="field">
					<div class="control">
						<input type="checkbox" id="cb8" name="systemnahe">
						<label class="checkbox" for="cb8">Systemnahe Programmierung</label>
					</div>
				</div>
			</form>
			<h2 class="title">Copy the following URL into your calendar of choice:</h2>
			<input type="text" class="input is-large output"
				value="https://tools.pascal-riesinger.de/rapla/get/"
				contenteditable="false"
			  readonly>
		</section>
	</main>
<script>
	const fields = [].slice.call(document.querySelectorAll(".field"));
	const output = document.querySelector(".output");

	const base = "https://tools.pascal-riesinger.de/rapla/get/"

	const updateOutput = () => {
		console.log("Updating output");
		let tags = fields.filter((field) => !field.querySelector("input").checked).map((field) =>
			encodeURIComponent(field.querySelector("input").name.toLowerCase())).join("+");

		output.value = `${base}${tags}?noCache`;
	}

	fields.forEach((e) => {
		const i = e.querySelector("input");
		console.log(i);
		i.addEventListener("change", updateOutput);
	})
</script>
</body>
</html>
